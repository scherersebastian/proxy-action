name: "Proxy action"
description: "Action that calls other actions - security actions"

inputs:
  API_ID: # id of input
    description: "Veracode API_ID"
    required: true
    # default: "World"
  API_KEY: # id of input
    description: "Veracode API_KEY"
    required: true
  path: # id of input
    description: "Path to assets"
    required: true
    default: "."

runs:
  using: "composite"
  steps:
    #- run: echo Hello ${{ inputs.who-to-greet }}.
    #  shell: bash
    #- id: random-number-generator
    #  run: echo "::set-output name=random-id::$(echo $RANDOM)"
    #  shell: bash
    #- run: echo "${{ github.action_path }}" >> $GITHUB_PATH
    #  shell: bash

    #- run: zip -r tractus.zip .
    #  shell: bash

    #- run: ls -l
    #  shell: bash

    #- run: cat results.json
    #  shell: bash

    - run: ls -l -a
      shell: bash

    # --- Secret Scanning ---
    - name: Gitleaks scan
      uses: zricethezav/gitleaks-action@master
      with:
        config-path: ./gitleaks.toml
      if: always()

    # Echo the node version of this step container based on this 12.14.1-alpine3.10 image
    - name: Log the step container node version
      uses: docker://node:12.14.1-alpine3.10
      with:
        entrypoint: usr/local/bin/echo
        args: -v

    - name: Step with docker to echo a string
      uses: docker://node:12.14.1-alpine3.10
      with:
        entrypoint: /bin/echo
        args: Hello Docker !

branding:
  icon: "activity"
  color: "gray-dark"
